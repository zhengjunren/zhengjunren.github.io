# printf&scanf

## printf

```c
#include <stdio.h>

int main() {
    printf("%5d\n", -12);
    printf("%5c\n", 'a');
    printf("%5s\n\n", "abcd");
    printf("%-5dA\n\n", -12);
    printf("%7.2lf\n", 12.345);
    printf("%7.lf\n", 12.345); // %7.0lf 和 %7.lf等价
    printf("%.5f\n", 12.345);
    printf("%-11lf\n", 12.345);
    int a = 111, b = 10, c;
    c = a % b;
    printf("a=%d,b=%d", 1, 111, b); // 输出  a=1,b=111
    return 0;
}
```
![运行结果](/c/printf.png)

| 格式控制符                                      | 说明                                                         |
| ----------------------------------------------- | ------------------------------------------------------------ |
| `%c`                                            | 输出一个单一的字符                                           |
| `%hd`、`%d`、 `%ld`                             | 以十进制、有符号的形式输出 short、int、long 类型的整数       |
| `%hu`、`%u`、`%lu`                              | 以十进制、无符号的形式输出 short、int、long 类型的整数       |
| `%ho`、`%o`、`%lo`                              | 以八进制、不带前缀、无符号的形式输出 short、int、long 类型的整 |
| `%#ho`、`%#o`、`%#lo`                           | 以八进制、带前缀、无符号的形式输出 short、int、long 类型的整数 |
| `%hx`、`%x`、`%lx`、<br/>`%hX`、`%X`、`%lX`     | 以十六进制、不带前缀、无符号的形式输出 short、int、long 类型的整数。如果 x 小写，那么输出的十六进制数字也小写；如果 X 大写，那么输出的十六进制数字也大写。 |
| `%#hx`、`%#x`、`%#lx`<br/>`%#hX`、`%#X`、`%#lX` | 以十六进制、带前缀、无符号的形式输出 short、int、long 类型的整数。如果 x 小写，那么输出的十六进制数字和前缀都小写；如果 X 大写，那么输出的十六进制数字和前缀都大写。 |
| `%f`、`%lf`                                     | 以十进制的形式输出 float、double 类型的小数                  |
| `%e`、`%le`<br/>`%E`、`%lE`                     | 以指数的形式输出 float、double 类型的小数。如果 e 小写，那么输出结果中的 e 也小写；如果 E 大写，那么输出结果中的 E 也大写。 |
| `%g`、`%lg`<br/>`%G`、`%lG`                     | 以十进制和指数中较短的形式输出 float、double 类型的小数，并且小数部分的最后不会添加多余的 0。如果 g 小写，那么当以指数形式输出时 e 也小写；如果 G 大写，那么当以指数形式输出时 E 也大写。 |
| `%s`                                            | 输出一个字符串                                               |

### 格式

```
%[flag][width][.precision]type
```

1. type 表示输出类型，比如 %d、%f、%c、%lf，type 就分别对应 d、f、c、lf；再如，`%-9d`中 type 对应 d。

> type 这一项必须有，这意味着输出时必须要知道是什么类型。

2. width 表示最小输出宽度，也就是至少占用几个字符的位置；例如，`%-9d`中 width 对应 9，表示输出结果最少占用 9 个字符的宽度。

> 当输出结果的宽度不足 width 时，以空格补齐（如果没有指定对齐方式，默认会在左边补齐空格）；当输出结果的宽度超过 width 时，width 不再起作用，按照数据本身的宽度来输出。

3. precision 表示输出精度，也就是小数的位数。

- 当小数部分的位数大于 precision 时，会按照四舍五入的原则丢掉多余的数字；
- 当小数部分的位数小于 precision 时，会在后面补 0。


另外，.precision 也可以用于整数和字符串，但是功能却是相反的：

- 用于整数时，.precision 表示最小输出宽度。与 width 不同的是，整数的宽度不足时会在左边补 0，而不是补空格。
- 用于字符串时，.precision 表示最大输出宽度，或者说截取字符串。当字符串的长度大于 precision 时，会截掉多余的字符；当字符串的长度小于 precision 时，.precision 就不再起作用。如：`printf("%5.1s", "12345");`，输出结果为：`四个空格1`


|flags（标识）|	描述|
| :----: | :--------: |
|\- | 在给定的字段宽度内左对齐，默认是右对齐（参见 width 子说明符）。|
|\+ | 强制在结果之前显示加号或减号（+ 或 -），即正数前面会显示 + 号。默认情况下，只有负数前面会显示一个 - 号。|
|空格|	如果没有写入任何符号，则在该值前面插入一个空格。|
|\# |  与 o、x 或 X 说明符一起使用时，非零值前面会分别显示 0、0x 或 0X。与 e、E 和 f 一起使用时，会强制输出包含一个小数点，即使后边没有数字时也会显示小数点。默认情况下，如果后边没有数字时候，不会显示显示小数点。与 g 或 G 一起使用时，结果与使用 e 或 E 时相同，但是尾部的零不会被移除。|
|0|	在指定填充 padding 的数字左边放置零（0），而不是空格（参见 width 子说明符）。|

|width（宽度）|	描述|
| :----: | :--------: |
|(number)|	要输出的字符的最小数目。如果输出的值短于该数，结果会用空格填充。如果输出的值长于该数，结果不会被截断。|
|\*|	宽度在 format 字符串中未指定，但是会作为附加整数值参数放置于要被格式化的参数之前。|

### 返回值
如果成功，则返回写入的字符总数，否则返回一个负数。

## scanf

:::tip 提示

scanf 函数中不可以使用`#`,`-`,`m.n`的格式附加字符(m、n属于自然数),

可以使用域宽的格式附加字符

:::

```c
#include <stdio.h>

int main() {
    int a;
    /*
     * 可以使用域宽
     * scanf("%5d", &a); 输入 12345678
     * printf("%d\n", a); 输出 12345
     */
    /*
     * 不可以使用负号
     * scanf("%-5d", &a);
     * printf("%d\n", a); 输出的a是垃圾值
     */
    /*
     * double b;
     * scanf("%7.2d", &b); 
     * printf("%d\n", b); 输出的b是垃圾值
     */
    char ch;
    while ((ch = getchar()) != '\n') {
        putchar(ch);
    }
    putchar('\n');
    return 0;
}
```

### 返回值
如果成功，该函数返回成功匹配和赋值的个数。如果到达文件末尾或发生读错误，则返回 EOF。