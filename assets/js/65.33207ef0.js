(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{562:function(t,s,a){"use strict";a.r(s);var n=a(7),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"compose-搭建-ftp-服务器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#compose-搭建-ftp-服务器"}},[t._v("#")]),t._v(" compose 搭建 ftp 服务器")]),t._v(" "),a("h2",{attrs:{id:"vsftpd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vsftpd"}},[t._v("#")]),t._v(" vsftpd")]),t._v(" "),a("p",[t._v("镜像地址："),a("a",{attrs:{href:"https://hub.docker.com/r/fauria/vsftpd",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://hub.docker.com/r/fauria/vsftpd"),a("OutboundLink")],1)]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("注意修改"),a("code",[t._v("PASV_ADDRESS")]),t._v("属性")])])]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("services")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ftp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" fauria/vsftpd\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("container_name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" vsftpd\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("restart")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" always\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /usr/local/docker/ftp/data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/home/vsftpd\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /usr/local/docker/ftp/data/pub"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/var/ftp/pub\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /usr/local/docker/ftp/conf/vsftpd.conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/etc/vsftpd/vsftpd.conf\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" 0.0.0.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token datetime number"}},[t._v("20:20")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" 0.0.0.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token datetime number"}},[t._v("21:21")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" 21100"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("21110"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("21100"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21110")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("FTP_USER")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" zhengjunren\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("FTP_PASS")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("123456")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PASV_ADDRESS")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 192.168.223.128\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PASV_MIN_PORT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21100")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("PASV_MAX_PORT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("21110")]),t._v("\n")])])]),a("h2",{attrs:{id:"配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置文件"}},[t._v("#")]),t._v(" 配置文件")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("vsftpd.conf")]),t._v(":")]),t._v(" "),a("li",[a("strong",[t._v("注意修改"),a("code",[t._v("pasv_address")]),t._v("属性")])])]),t._v(" "),a("div",{staticClass:"language-conf extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# Run in the foreground to keep the container running:\nbackground=NO\n\n# Allow anonymous FTP? (Beware - allowed by default if you comment this out).\nanonymous_enable=YES\n\n# Uncomment this to allow local users to log in.\nlocal_enable=YES\n\n## Enable virtual users\nguest_enable=YES\n\n## Virtual users will use the same permissions as anonymous\nvirtual_use_local_privs=YES\n\n# Uncomment this to enable any form of FTP write command.\nwrite_enable=YES\n\n## PAM file name\npam_service_name=vsftpd_virtual\n\n## Home Directory for virtual users\nuser_sub_token=$USER\nlocal_root=/home/vsftpd/$USER\n\n# You may specify an explicit list of local users to chroot() to their home\n# directory. If chroot_local_user is YES, then this list becomes a list of\n# users to NOT chroot().\nchroot_local_user=YES\n\n# Workaround chroot check.\n# See https://www.benscobie.com/fixing-500-oops-vsftpd-refusing-to-run-with-writable-root-inside-chroot/\n# and http://serverfault.com/questions/362619/why-is-the-chroot-local-user-of-vsftpd-insecure\nallow_writeable_chroot=YES\n\n## Hide ids from user\nhide_ids=YES\n\n## Enable logging\nxferlog_enable=YES\nxferlog_file=/var/log/vsftpd/vsftpd.log\n\n## Enable active mode\nport_enable=YES\nconnect_from_port_20=YES\nftp_data_port=20\n\n## Disable seccomp filter sanboxing\nseccomp_sandbox=NO\npasv_address=192.168.223.128\npasv_max_port=21110\npasv_min_port=21100\npasv_addr_resolve=NO\npasv_enable=YES\nfile_open_mode=0666\nlocal_umask=077\nxferlog_std_format=NO\npasv_address=192.168.223.128\npasv_max_port=21110\npasv_min_port=21100\npasv_addr_resolve=NO\npasv_enable=YES\nfile_open_mode=0666\nlocal_umask=077\nxferlog_std_format=NO\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);