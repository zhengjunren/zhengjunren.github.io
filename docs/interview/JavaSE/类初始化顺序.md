#  类初始化顺序

## 简单初始化顺序

1. 静态成员变量
2. 静态代码块
3. 非静态成员变量
4. 非静态代码块
5. 构造函数

### 补充

在函数中多次创建同一个类的对象，静态方法和代码块只会被创建一次。而非静态的会被多次初始化。

## 有继承时的初始化顺序

1. 父类静态成员变量
2. 父类静态代码块
3. 子类静态成员变量
4. 子类静态代码块
5. 父类非静态成员变量
6. 父类非静态代码块
7. 父类构造函数
8. 子类非静态成员变量
9. 子类非静态代码块
10. 子类构造函数

### 子类和父类的构造方法

如果子类构造器没有显示地调用父类的构造器，则将自动地调用父类默认(无参构造函数)的构造器。若果父类没有无参的构造器，并且在子类的构造器中没有显示地调用父类的其他构造方法，则 Java 编译器将报告错误。使用 super 调用构造器的语句必须是子类构造器的第一条语句。

## 测试源码

### 简单初始化顺序测试源码
```java
package xyz.zzz989.hello.java.tests;

/**
 * <p>ClassName: TestRunOrder</p>
 * <p>Description: </p>
 *
 * @author ZhengJunren
 * @version 1.0.0
 * @date 2019/9/6 21:18
 */
public class TestRunOrder {

    static TestOrder testOrder1 = new TestOrder("静态成员变量初始化");

    TestOrder testOrder = new TestOrder("非静态成员变量初始化");

    public static void main(String[] args) {
        TestRunOrder testRunOrder = new TestRunOrder();
        new TestRunOrder();
    }

    public TestRunOrder() {
        System.out.println("构造函数初始化");
        System.out.println("---------------------------------");
    }

    {
        System.out.println("非静态代码块");
    }

    static {
        System.out.println("静态代码块");
    }

}

class TestOrder {

    public TestOrder(String s) {
        System.out.println(s);
    }
}
```

#### 测试结果
![测试结果](/interview/testorder1.png)

### 有继承时的初始化测试源码
```java
package xyz.zzz989.hello.java.tests;

/**
 * <p>ClassName: TestRunOrder</p>
 * <p>Description: </p>
 *
 * @author ZhengJunren
 * @version 1.0.0
 * @date 2019/9/6 21:18
 */
public class TestRunOrder {

    public static void main(String[] args) {
        Parent test = new Son();
    }
}

class TestOrder {

    public TestOrder(String s) {
        System.out.println(s);
    }
}

class Son extends Parent{
    static TestOrder testOrder1 = new TestOrder("子类静态成员变量初始化");

    TestOrder testOrder = new TestOrder("子类非静态成员变量初始化");

    {
        System.out.println("子类非静态代码块");
    }

    static {
        System.out.println("子类静态代码块");
    }

    public Son() {
        System.out.println("子类构造函数");
    }
}

class Parent {

    static TestOrder testOrder1 = new TestOrder("父类静态成员变量初始化");

    TestOrder testOrder = new TestOrder("父类非静态成员变量初始化");

    {
        System.out.println("父类非静态代码块");
    }

    static {
        System.out.println("父类静态代码块");
    }

    public Parent() {
        System.out.println("父类构造函数");
    }
}
```
#### 测试结果
![测试结果](/interview/testorder2.png)

## 总结

1. 父类先于子类
2. 静态先于非静态
3. 变量先于代码块
4. 构造函数最后
