# 优先级

| 优先级 |   运算符   |  名称（含义）  |         使用形式         | 结合方向 | 说明 |
| :----: | :--------: | :------------: | :----------------------: | :------: | :--: |
|   1    |    `[]`    |    数组下标    |    数组名[常量表达式]    |  左到右  |      |
|   1    |    `()`    |     圆括号     |  (表达式)、函数名(参数)  |  左到右  |      |
|   1    |    `.`     | 成员选择(指针) |     对象指针->成员名     |  左到右  |      |
|   1    |    `->`    | 成员选择(指针) |     对象指针->成员名     |  左到右  |      |
|   1    | `++`(后缀) |   自增运算符   |         变量名++         |  左到右  |      |
|   1    | `--`(后缀) |   自减运算符   |         变量名--         |  左到右  |      |
|   2    |    `-`     |      负号      |       负号(表达式)       |  右到左  | 单目 |
|   2    | `++`(前缀) |   自增运算符   |         ++变量名         |  右到左  | 单目 |
|   2    | `--`(前缀) |   自减运算符   |         --变量名         |  右到左  | 单目 |
|   2    |    `*`     |   取值运算符   |        *指针变量         |  右到左  | 单目 |
|   2    |    `&`     |  取地址运算符  |         &变量名          |  右到左  | 单目 |
|   2    |    `!`     |  逻辑非运算符  |         !表达式          |  右到左  | 单目 |
|   2    |    `~`     | 按位取反运算符 |         ~表达式          |  右到左  | 单目 |
|   2    |  `sizeof`  |   长度运算符   |      sizeof(表达式)      |  右到左  |      |
|   3    |  `(类型)`  |  强制类型转换  |     (数据类型)表达式     |  右到左  |      |
|   4    |    `*`     |       除       |      表达式/表达式       |  左到右  | 双目 |
|   4    |    `/`     |       成       |      表达式*表达式       |  左到右  | 双目 |
|   4    |    `%`     |      取余      |  整型表达式%整型表达式   |  左到右  | 双目 |
|   5    |    `+`     |       加       |      表达式+表达式       |  左到右  | 双目 |
|   5    |    `-`     |       减       |      表达式-表达式       |  左到右  | 双目 |
|   6    |    `<<`    |      左移      |      变量名<<表达式      |  左到右  | 双目 |
|   6    |    `>>`    |      右移      |      变量名>>表达式      |  左到右  | 双目 |
|   7    |    `>`     |      大于      |      表达式>表达式       |  左到右  | 双目 |
|   7    |    `>=`    |    大于等于    |      表达式>=表达式      |  左到右  | 双目 |
|   7    |    `<`     |      小于      |      表达式<表达式       |  左到右  | 双目 |
|   7    |    `<=`    |    小于等于    |      表达式<=表达式      |  左到右  | 双目 |
|   8    |    `==`    |      等于      |      表达式==表达式      |  左到右  | 双目 |
|   8    |    `!=`    |     不等于     |      表达式!=表达式      |  左到右  | 双目 |
|   9    |    `&`     |     按位与     |      表达式&表达式       |  左到右  | 双目 |
|   10   |    `^`     |    按位异或    |      表达式^表达式       |  左到右  | 双目 |
|   11   |    `|`     |     按位或     |      表达式\|表达式      |  左到右  | 双目 |
|   12   |    `&&`    |     逻辑与     |      表达式&&表达式      |  左到右  | 双目 |
|   13   |    `||`    |     逻辑或     |     表达式\|\|表达式     |  左到右  | 双目 |
|   14   |   `? :`    |   条件运算符   | 表达式1?表达式2:表达式3  |  左到右  | 三目 |
|   15   |    `=`     |      赋值      |       变量=表达式        |  右到左  |      |
|   15   |    `/=`    |    除后赋值    |       变量/=表达式       |  右到左  |      |
|   15   |    `*=`    |    乘后赋值    |       变量*=表达式       |  右到左  |      |
|   15   |    `%=`    |   求余后赋值   |       变量%=表达式       |  右到左  |      |
|   15   |    `+=`    |    加后赋值    |       变量+=表达式       |  右到左  |      |
|   15   |    `-=`    |    减后赋值    |       变量-=表达式       |  右到左  |      |
|   15   |   `<<=`    |   左移后赋值   |      变量<<=表达式       |  右到左  |      |
|   15   |   `>>=`    |   右移后赋值   |      变量>>=表达式       |  右到左  |      |
|   15   |    `&=`    |  按位与后赋值  |       变量&=表达式       |  右到左  |      |
|   15   |    `^=`    | 按位异或后赋值 |       变量^=表达式       |  右到左  |      |
|   15   |    `|=`    |  按位或后赋值  |      变量\|=表达式       |  右到左  |      |
|   16   |    `,`     |   逗号运算符   | 表达式,表达式，表达式... |  左到右  |      |

|                 优先级问题                 |         表达式         |                         误以为的结果                         |                           实际结果                           |
| :----------------------------------------: | :--------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
| `.`的优先级高于`*`（`->`用于消除这个问题） |         `*p.f`         |           `p` 所指对象的字段 `f`，等价于：`(*p).f`           | 对`p`取`f`偏移，作为指针，然后进行解除引用操作，等价于：`*(p.f)` |
|            `[]`的优先级高于`*`             |      `int *ap[]`       |     `ap` 是个指向`int`数组的指针，等价于：`int (*ap)[]`      |    `ap` 是个元素为`int`指针的数组，等价于：`int *(ap [])`    |
|             函数 `()` 高于`*`              |      `int *fp()`       | `fp` 是个函数指针，所指函数返回 `int`，等价于： `int (*fp)()` |     `fp` 是个函数，返回 `int*`，等价于：`int* ( fp() )`      |
|            `==`和`!=`高于位操作            |  `(val & mask != 0)`   |                      `(val &mask) != 0`                      |                     `val & (mask != 0)`                      |
|           `==`和`!= `高于赋值符            | `c = getchar() != EOF` |                   `(c = getchar()) != EOF`                   |                   `c = (getchar() != EOF)`                   |
|         算术运算符高于位移 运算符          |    `msb << 4 + lsb`    |                      `(msb << 4) + lsb`                      |                      `msb << (4 + lsb)`                      |
|    逗号运算符在所有运 算符中优先级最低     |       `i = 1, 2`       |                         `i = (1,2)`                          |                         `(i = 1), 2`                         |


`int *p[n]`; 中，运算符`[]`优先级高，先与`p`结合成为一个数组，再由`int*`说明这是一个整型指针数组。

`int (*p)[n]`; 中`()`优先级高，首先说明`p`是一个指针，指向一个整型的一维数组。

**`(*p)++`和`*(p++)`和`*p++`的区别**

前缀递增递减和 * 优先级相同，从右到左

后缀递增递减比 * 优先级高，从左到右
```c
int arr[5] = {1, 3, 5, 7, 9};
int *p = arr;
```
+ *++p：p先自增，然后 *p，最终为 3
+ ++*p：先 *p，即 arr[0] = 1，然后在自增，最终为 2
+ *p++：值为 arr[0]，即 1，语句执行完后，p 指向 arr[1]
+ (*p)++：先 *p，即arr[0] = 1，然后自增，语句执行完后 arr[0] = 2
+ *(p++)：效果等同于 *p++